name: CI

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

permissions:
  contents: read

jobs:
  standard:
    uses: c-daly/logos/.github/workflows/reusable-standard-ci.yml@main
    with:
      python_versions: '["3.9","3.10","3.11"]'
      python_lint_paths: 'src tests'
      mypy_targets: 'src'
      pytest_command: 'pytest --cov=apollo --cov-report=xml --cov-report=term'
      coverage_python_version: '3.11'
      enable_node: true
      node_version: '18'
      node_working_directory: 'webapp'
      node_cache_path: 'webapp/package-lock.json'
    secrets:
      CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}
