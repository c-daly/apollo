version: '3.9'
services:
  sophia-mock:
    build:
      context: ./mocks/sophia
      dockerfile: Dockerfile
    container_name: apollo-test-sophia
    ports:
      - "8080:8080"
    environment:
      NEO4J_URI: bolt://neo4j:7687
      NEO4J_USER: neo4j
      NEO4J_PASSWORD: neo4jtest
    depends_on:
      neo4j:
        condition: service_healthy
    healthcheck:
      test:
        - CMD
        - curl
        - -f
        - http://localhost:8080/health
      interval: 5s
      timeout: 3s
      retries: 5
    networks:
      - logos-test-network
